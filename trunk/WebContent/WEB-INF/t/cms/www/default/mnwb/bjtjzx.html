<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
<title>编辑推荐中学</title>
<link href="${base}/r/css/head_footer.css" rel="stylesheet" type="text/css" media="screen"/>
<link href="${base}/r/css/ydyfw.css" rel="stylesheet" type="text/css" media="screen"/>
<script src="${base}/r/js/jquery-1.8.3.min.js" language="javascript"></script>
<script src="${base}/thirdparty/My97DatePicker/WdatePicker.js" language="javascript"></script>
<!--[if lte IE 9]>
<script src="${base}/r/js/html5shiv.js" language="javascript"></script>
<script src="${base}/r/js/respond.min.js" language="javascript"></script>
<![endif]-->
<style>
	.add_shhd_div{
	    border: 1px dashed #DDD;
	    width: 98%;
	    font-size: 15px;
	    text-align: center;
	    background-color: #fAFAFA;
	    margin: 10px 1% 10px 1%;
	    padding-top:13px;
	}
	.add_shhd_tableOut{
	    margin: 10px 1% 10px 1%;
	    //border: 1px dashed red;
	    padding:10px 0 20px 0;
	}
	.add_shhd_table{
		width:100%;
	}
	.add_shhd_table tr{
		height:65px;
	}
	.input-style01{
		width:300px; 
		height:30px;
		line-height:30px;
		outline:none;
		border:1px solid #BBBBBB;
		text-indent:14px;
		font-size:16px;
	}
	.input-style02{
		width:187px; 
		height:30px;
		line-height:30px;
		outline:none;
		border:1px solid #BBBBBB;
		text-indent:14px;
		font-size:16px;
	}
	
	.bt-div-out{
		width:100%;
		text-align:right;
	}
	.bt_a{
	display:inline-block;
	width:15%;
	height:34px;
	line-height:34px;
	text-align:center;
	font-size:18px;
	letter-spacing:4px;
	background-color:#3399FF;
	color:#FFF;
	margin:30px 14px 30px 0;
	border:none;
}
.bt_a2{
	display:inline-block;
	width:15%;
	height:34px;
	line-height:34px;
	text-align:center;
	font-size:18px;
	letter-spacing:4px;
	background-color:#FF4141;
	color:#FFF;
	margin:30px 34px 30px 0;
	border:none;
}
</style>
</head>
<body>
	<div class="z_body" style="background: #F2F2F2">
		[#include "../wdedu/include/header_address.html"/]
		[#include "../wdedu/include/header_dylq.html"/]
		<div class="z_width_out">
			<div class="on_line">
				<div class="bzy_where">
					&nbsp;您当前位置：<a href="${base}"><span class="">主页&nbsp;</span></a>><a href="${base}/ydyfw/queryOrder.jspx"><span class="">我的一对一服务清单&nbsp;</span></a>><a href="${base}/mnwb/jbxx.jspx?orderId=${order.orderId}"><span class="">&nbsp;填报个人信息&nbsp;</span></a>><span class="">&nbsp;编辑推荐中学</span>
				</div>
			</div>
		</div>
		<div class="z_width_out">
			<div class="on_line" style="overflow:hidden;">
				<div style="background:#FFF;overflow:hidden;padding:10px 0 30px 0;margin:15px 0 30px 0 ;">
					<div class="add_shhd_div">
						<font color="red">注意：</font>本页面对于证明材料的删除，上传操作，均在点击“新增”或“保存”按钮之后才会生效。
						<br>（<font color="red">* </font>为必填项）
						<div class="add_shhd_tableOut">
						<form id="form_step" name="form_step" action="updatetjzx.jspx" method="post">
					        <input type="hidden" name="id" id="id" value="${referee.id!}" >
							<input type="hidden" name="orderId" value="${order.orderId}">
					        <table class="add_shhd_table">
								<tr>
									<td style="width:14%;" align="right"><font color="red">*&nbsp;&nbsp;</font>推荐中学名称：</td>
									<td style="width:86%;" align="left">
										<input class="input-style01" readOnly type="text" name="refereeName" id="refereeName" maxlength="64" value="${referee.refereeName!}">
									</td>
								</tr>
								<tr>
									<td align="right"><font color="red">*&nbsp;&nbsp;</font>所在地：</td>
									<td align="left">
								[@p.select name="provinceId" id="provinceId" class="input-style02" value=referee.province list=proList listKey="pro_code" listValue="pro_name" onchange="selectProvince()"/]
								[@p.select name="cityId" id="cityId" class="input-style02" value=referee.city list=cityList listKey="city_code" listValue="city_name" onchange="selectCity()"/]
								[@p.select name="regionId" id="regionId" class="input-style02" value=referee.region list=boroughList listKey="quxian_code" listValue="quxian_name" onchange="saveCity()"/]
										<input type="hidden" name="province" id="province" value="${referee.province!}">
										<input type="hidden" name="city" id="city" value="${referee.city!}">
										<input type="hidden" name="region" id="region" value="${referee.region!}">
									</td>
								</tr>
								<tr>
									<td align="right"><font color="red">*&nbsp;&nbsp;</font>联系人：</td>
									<td align="left">
									 	<input class="input-style01" type="text" name="linkMan" id="linkMan" maxlength="16" value="${referee.linkMan!}" readOnly>
									</td>
								</tr>
								<tr>
									<td align="right"><font color="red">*&nbsp;&nbsp;</font>手机号码：</td>
									<td align="left">
										 <input class="input-style01" type="text" name="telephone" id="telephone" maxlength="16" value="${referee.telephone!}">
										<font color="red">&nbsp;&nbsp;&nbsp;确认志愿后该手机号将会收到一条提醒填写推荐信的短信</font>
									</td>
								</tr>
								<tr>
									<td align="right"><font color="red">*&nbsp;&nbsp;</font>邮箱：</td>
									<td align="left">
										<input class="input-style01" type="text" name="email" id="email" maxlength="32" value="${referee.email!}">
										<font color="red">&nbsp;&nbsp;&nbsp;确认志愿后该邮箱将会收到一封提醒填写推荐信的邮件</font>
									</td>
								</tr>
							</table>
							<div class="bt-div-out">
								<input class="bt_a" type="button" value="保存" onclick="check()"/>
								<input class="bt_a2" type="button" value='取消' onclick='javascript:history.go(-1);' />
							</div>
						</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		[#include "../wdedu/include/footer_new.html"/]
	</div>
	<script type="text/javascript">
	function check(){
		var isPhone = /^1(3|4|5|7|8)\d{9}$/;
		if($("#refereeName").val()==""){
			alert("请输入推荐中学名称!");
			return;
		}
		if($("#province").val()=="" || $("#city").val()=="" || $("#region").val()==""){
			alert("请选择好所在地!");
			return;
		}
		if($("#linkMan").val()==""){
			alert("请输入联系人!");
			return;
		}
		if($("#telephone").val()==""){
			alert("请输入手机号码!");
			return;
		}
		
		if(!isPhone.test($("#telephone").val())){
			alert("手机号码输入有误,请重新输入!");
			return;
		}
		
		if($("#email").val()==""){
			alert("请输入邮箱!");
			return;
		}
		$("#form_step").submit();
	}
	
	function selectProvince(){
		$("#cityId").empty();
		$("#regionId").empty();
	    var province=$("#provinceId").val();
	    if(province!='')
		{
	    	 $.ajax({
				　　url : '${base}/mnwb/getCity.jspx',
				   data:{pro_code:province},
				　　type : "POST",
				   async:false,
				   error:function(request) {
		              alert("提交出现异常啦。。。。");
		          },
				　　success : function(data) 
				   {		
					     　　var res = eval('(' + data + ')');	
					   var option2 = $("<option>").val("-1").text("请选择");
					   $("#cityId").append(option2);
					    for(var o in res)
					    	{
					    		var option = $("<option>").val(res[o].city_code).text(res[o].city_name);
					    		$("#cityId").append(option);					    									   
					    	}				
				   }
			 		 
			}); 
	    	$('#province').val($("#provinceId").find("option:selected").val());
	    	$('#city').val("");
	    	$('#region').val("");
		} 	    
	}



	function selectCity(){
		$("#regionId").empty();
	    var province=$("#provinceId").val();
	    var city=$("#cityId").val();
	    if(city!='')
		{
	    	 $.ajax({
				　　url : '${base}/mnwb/getBorough.jspx',
				   data:{pro_code:province,city_code:city},
				　　type : "POST",
				   async:false,
				   error:function(request) {
		              alert("提交出现异常啦。。。。");
		          },
				　　success : function(data) 
				   {		
					     　var res = eval('(' + data + ')');	
					   var option2 = $("<option>").val("-1").text("请选择");
					   $("#regionId").append(option2);
					   for(var o in res)
					    {
					    	var option = $("<option>").val(res[o].quxian_code).text(res[o].quxian_name);
					    	$("#regionId").append(option);					    									   
					    }				
				   }
			});
	    	$('#city').val($("#cityId").find("option:selected").val());
	    	$('#region').val("");
		} 	    
	}

	function saveCity(){
		$('#region').val($("#regionId").find("option:selected").val());
	}
	</script>
</body>
</html>